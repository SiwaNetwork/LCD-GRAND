# Руководство по подключению 1.54 inch LCD GAME дисплея

## Схема подключения согласно распиновке Raspberry Pi

### Основные пины дисплея

| Функция | GPIO (BCM) | Pin | Описание |
|---------|------------|-----|----------|
| **RST** | GPIO 27 | Pin 13 | Сброс дисплея |
| **DC** | GPIO 22 | Pin 15 | Data/Command |
| **CS** | GPIO 8 | Pin 24 | Chip Select (CE0) |
| **BL** | GPIO 18 | Pin 12 | Подсветка |

### SPI пины

| Функция | GPIO (BCM) | Pin | Описание |
|---------|------------|-----|----------|
| **MOSI** | GPIO 10 | Pin 19 | Master Out Slave In |
| **MISO** | GPIO 9 | Pin 21 | Master In Slave Out |
| **SCK** | GPIO 11 | Pin 23 | SPI Clock |

### Питание

| Функция | Pin | Описание |
|---------|-----|----------|
| **3.3V** | Pin 1, 17 | Питание 3.3V |
| **5V** | Pin 2, 4 | Питание 5V |
| **GND** | Pin 6, 9, 14, 20, 25, 30, 34, 39 | Земля |

## Кнопки управления

| Кнопка | GPIO (BCM) | Pin | Описание |
|--------|------------|-----|----------|
| **A** | GPIO 21 | Pin 40 | Кнопка A |
| **B** | GPIO 20 | Pin 38 | Кнопка B |
| **UP** | GPIO 16 | Pin 36 | Кнопка вверх |
| **DOWN** | GPIO 5 | Pin 29 | Кнопка вниз |
| **LEFT** | GPIO 6 | Pin 31 | Кнопка влево |
| **RIGHT** | GPIO 13 | Pin 33 | Кнопка вправо |
| **START** | GPIO 19 | Pin 35 | Кнопка старт |
| **SELECT** | GPIO 26 | Pin 37 | Кнопка селект |
| **MENU** | GPIO 17 | Pin 11 | Кнопка меню/IRQ |

## Схема подключения

```
Raspberry Pi 40-pin Header
┌─────────────────────────────────────────┐
│ 1  3.3V    2  5V                      │
│ 3  SDA     4  5V                      │
│ 5  SCL     6  GND                     │
│ 7  GPIO4   8  TX                      │
│ 9  GND    10  RX                      │
│11  MENU   12  BL                      │ ← Подсветка
│13  RST    14  GND                     │ ← Сброс дисплея
│15  DC     16  GPIO23                  │ ← Data/Command
│17  3.3V   18  GPIO24                  │
│19  MOSI   20  GND                     │ ← SPI MOSI
│21  MISO   22  GPIO25                  │ ← SPI MISO
│23  SCK    24  CS                      │ ← SPI Clock, Chip Select
│25  GND    26  GPIO7                   │
│27  ID_SD  28  ID_SC                   │
│29  DOWN   30  GND                     │ ← Кнопка вниз
│31  LEFT   32  GPIO12                  │ ← Кнопка влево
│33  RIGHT  34  GND                     │ ← Кнопка вправо
│35  START  36  UP                      │ ← Кнопка старт, вверх
│37  SELECT 38  B                       │ ← Кнопка селект, B
│39  GND    40  A                       │ ← Кнопка A
└─────────────────────────────────────────┘
```

## Настройка SPI

Перед использованием убедитесь, что SPI включен в Raspberry Pi:

```bash
# Включение SPI через raspi-config
sudo raspi-config

# Или редактирование /boot/config.txt
sudo nano /boot/config.txt

# Добавьте или раскомментируйте:
dtparam=spi=on
```

## Проверка подключения

1. **Тест дисплея:**
   ```bash
   python3 lcd_game.py
   ```

2. **Тест кнопок:**
   ```bash
   python3 examples/button_test.py
   ```

3. **Простая игра:**
   ```bash
   python3 examples/simple_game.py
   ```

## Устранение неполадок

### Дисплей не работает
- Проверьте подключение питания (3.3V и GND)
- Убедитесь, что SPI включен
- Проверьте правильность подключения RST, DC, CS пинов

### Кнопки не реагируют
- Проверьте подключение кнопок к соответствующим GPIO
- Убедитесь, что используется правильная нумерация (BCM)
- Проверьте подтягивающие резисторы

### Медленная работа
- Уменьшите частоту SPI в config.py
- Проверьте качество соединений
- Убедитесь в отсутствии помех

## Дополнительные возможности

### I2C подключение
Если дисплей поддерживает I2C:
- SDA: GPIO 2 (Pin 3)
- SCL: GPIO 3 (Pin 5)

### UART подключение
Для отладки:
- TX: GPIO 14 (Pin 8)
- RX: GPIO 15 (Pin 10)

## Примеры использования

Смотрите папку `examples/` для готовых примеров:
- `button_test.py` - Тест всех кнопок
- `simple_game.py` - Простая игра с управлением
- Другие примеры игр и приложений